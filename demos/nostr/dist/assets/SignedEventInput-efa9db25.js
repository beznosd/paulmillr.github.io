import{d as I,h as k,c as i,b as e,O as v,u as o,F as w,r as x,s as j,t as c,Q as r,j as g,R as u,p as C,e as N,o as _,S as B,_ as R}from"../main.js";const p=t=>(C("data-v-b4f4b8c1"),t=t(),N(),t),F={class:"message-fields-wrapper"},J={class:"signed-message-desc"},O=p(()=>e("p",{class:"signed-message-desc_p"},[v(" Event should be signed with your private key in advance. Event will be broadcasted to a selected relay. More details about events and signatures are "),e("a",{target:"_blank",href:"https://github.com/nostr-protocol/nips/blob/master/01.md#events-and-signatures"},"here"),v(". ")],-1)),M={class:"signed-message-desc_p"},P=p(()=>e("br",null,null,-1)),V={key:0,class:"additional-relays"},A={class:"additional-relay-field"},T=p(()=>e("span",null,"1.",-1)),D=["value"],L={class:"additional-relay-field"},Q=["onInput"],U={class:"message-fields__field_sig"},Y=p(()=>e("label",{class:"message-fields__label",for:"signed_json"},[e("strong",null,"JSON of a signed event")],-1)),$={class:"field-elements"},q={class:"signed-json-btn-wrapper"},z={class:"error"},G=I({__name:"SignedEventInput",props:{isSendingMessage:{type:Boolean},broadcastError:null},emits:["broadcastEvent"],setup(t,{emit:f}){const d=k(""),h=()=>{if(!r.value.length){d.value="Provide signed event.";return}let s;try{s=JSON.parse(r.value)}catch{d.value="Invalid JSON. Please check it and try again.";return}const a=g.value;if(!a||a.status!==1){d.value="Please connect to relay first.";return}d.value="",f("broadcastEvent",s,"json")},y=()=>{const s=u.value+1;u.update(s)},m=s=>{var a;r.update((a=s==null?void 0:s.target)==null?void 0:a.value)},S=(s,a)=>{var l;const n=(l=s==null?void 0:s.target)==null?void 0:l.value;n&&B.updateRelay(a,n)};return(s,a)=>{var n,l;return _(),i("div",F,[e("div",J,[O,e("p",M,[v(" Event will be broadcasted to a selected relay. You can add more relays to retransmit the event. "),P,e("button",{class:"additional-relay-btn",onClick:y}," Add relay "),o(u).value>0?(_(),i("div",V,[e("div",A,[T,e("input",{readonly:"",value:(n=o(g).value)!=null&&n.url?`${(l=o(g).value)==null?void 0:l.url} (already selected)`:"Firstly connect to default relay",type:"text"},null,8,D)]),(_(!0),i(w,null,x(o(u).value,b=>(_(),i("div",null,[e("div",L,[e("span",null,c(b+1)+".",1),e("input",{onInput:E=>S(E,b),placeholder:"[wss://]relay.example.com",type:"text"},null,40,Q)])]))),256))])):j("",!0)])]),e("div",U,[Y,e("div",$,[e("textarea",{class:"signed-json-textarea",name:"signed_json",id:"signed_json",cols:"30",rows:"5",onInput:m,placeholder:'{"kind":1,"pubkey":"5486dbb083512982669fa180aa02d722ce35054233cea724061fbc5f39f81aa3","created_at":1685664152,"content":"Test message ðŸ‘‹","tags":[],"id":"89adae408121ba6d721203365becff4d312292a9dd9b7a35ffa230a1483b09a2","sig":"b2592ae88ba1040c928e458dd6822413f148c8cc4f478d992e024e8c9d9648b96e6ce6dc564ab5815675007f824d9e9f634f8dbde554afeb6e594bcaac4389dd"}'},c(o(r).value),33)])]),e("div",q,[e("div",z,c(d.value)+" "+c(t.broadcastError),1),e("button",{class:"send-btn send-btn_signed-json",onClick:h},c(t.isSendingMessage?"Broadcasting...":"Broadcast"),1)])])}}});const K=R(G,[["__scopeId","data-v-b4f4b8c1"]]);export{K as default};
